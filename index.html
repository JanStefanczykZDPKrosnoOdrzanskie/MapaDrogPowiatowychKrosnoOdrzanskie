<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ZDP Krosno Odrzańskie Mapa</title>

<link href="https://unpkg.com/maplibre-gl@3.6.1/dist/maplibre-gl.css" rel="stylesheet"/>
<script src="https://unpkg.com/maplibre-gl@3.6.1/dist/maplibre-gl.js"></script>

<script src="road-style-render.js"></script>
<script src="legend-control.js"></script>

<style>

body{
margin:0;
padding:0;
}

#map{
position:absolute;
top:0;
bottom:0;
width:100%;
}

#legend{
position:absolute;
top:10px;
left:10px;
z-index:1;
background:white;
padding:10px;
border-radius:5px;
box-shadow:0 0 5px rgba(0,0,0,0.3);
font-family:Arial,sans-serif;
font-size:14px;
}

.legend-line{
display:inline-block;
width:40px;
height:3px;
background:currentColor;
margin-right:5px;
vertical-align:middle;
}

</style>

</head>

<body>

<div id="legend">
<h3>Legenda</h3>

<label>
<input type="checkbox" data-layers="DK_i_DW_layer" checked>
<span class="legend-line" style="color:#FF0000"></span>
Drogi krajowe / wojewódzkie
</label><br>

<label>
<input type="checkbox" data-layers="DP_layer" checked>
<span class="legend-line" style="color:#A500AD"></span>
Drogi powiatowe
</label>

</div>

<div id="map"></div>

<script>

/* expose map globally */
window.map_instance = new maplibregl.Map({

container:'map',

style:{
version:8,

sources:{
osm:{
type:"raster",
tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],
tileSize:256
}
},

layers:[{
id:"osm",
type:"raster",
source:"osm"
}]
},

center:[15.1,51.96],
zoom:10

});

/* pipeline load */

window.map_instance.on('load', async()=>{

await ZDP_LOAD_GEO_SOURCES(window.map_instance);

if(window.ZDP_RENDER_ROAD_STYLES){
ZDP_RENDER_ROAD_STYLES(window.map_instance);
}

if(window.ZDP_LEGEND_INIT){
ZDP_LEGEND_INIT();
}

});

</script>

</body>
</html>
